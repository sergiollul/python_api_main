2) Crea el servicio systemd

sudo bash -c 'cat > /etc/systemd/system/numbux.service <<SERVICE
[Unit]
Description=Numbux FastAPI
After=network.target

[Service]
WorkingDirectory=/srv/numbux-api
EnvironmentFile=/srv/numbux-api/.env
ExecStart=/srv/numbux-api/.venv/bin/uvicorn app.main:app --host 127.0.0.1 --port 8000
Restart=always
RestartSec=3

[Install]
WantedBy=multi-user.target
SERVICE'


------
Nota: usamos EnvironmentFile para que coja tu DATABASE_URL (con %40) sin problemas.
------


3) Activa y arranca el servicio
sudo systemctl daemon-reload
sudo systemctl enable --now numbux
sudo systemctl status numbux --no-pager

-----
DeberÃ­as ver active (running).
-----



ðŸ§­ Resumen rÃ¡pido de tu entorno actual
Componente	Estado
ðŸ Python (FastAPI)	âœ… /srv/numbux-api/app/main.py funcionando
ðŸ—ƒï¸ PostgreSQL	âœ… conexiÃ³n estable como usuario numbux
ðŸ” Systemd	âœ… servicio activo numbux.service (autoarranca tras reinicio)
ðŸ”Œ Endpoint	âœ… POST /check_email responde correctamente






